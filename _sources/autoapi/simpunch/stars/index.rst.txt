simpunch.stars
==============

.. py:module:: simpunch.stars

.. autoapi-nested-parse::

   Functions for starfield generation.



Attributes
----------

.. autoapisummary::

   simpunch.stars.THIS_DIR
   simpunch.stars.HIPPARCOS_URL


Functions
---------

.. autoapisummary::

   simpunch.stars.load_catalog
   simpunch.stars.load_raw_hipparcos_catalog
   simpunch.stars.filter_for_visible_stars
   simpunch.stars.find_catalog_in_image


Module Contents
---------------

.. py:data:: THIS_DIR

.. py:data:: HIPPARCOS_URL
   :value: 'https://cdsarc.cds.unistra.fr/ftp/cats/I/239/hip_main.dat'


.. py:function:: load_catalog(catalog_path: str = os.path.join(THIS_DIR, 'data/hip_main.dat'), url: str = HIPPARCOS_URL) -> pandas.DataFrame

   Load the Hipparcos catalog.


.. py:function:: load_raw_hipparcos_catalog(catalog_path: str = os.path.join(THIS_DIR, 'data/hip_main.dat'), url: str = HIPPARCOS_URL) -> pandas.DataFrame

   Download hipparcos catalog from website.

   :param catalog_path: path to the Hipparcos catalog
   :type catalog_path: str
   :param url: url to the Hipparcos catalog for retrieval
   :type url: str

   :returns: loaded catalog with selected columns
   :rtype: pd.DataFrame


.. py:function:: filter_for_visible_stars(catalog: pandas.DataFrame, dimmest_magnitude: float = 6) -> pandas.DataFrame

   Filter to only include stars brighter than a given magnitude.

   :param catalog: a catalog data frame
   :type catalog: pd.DataFrame
   :param dimmest_magnitude: the dimmest magnitude to keep
   :type dimmest_magnitude: float

   :returns: a catalog with stars dimmer than the `dimmest_magnitude` removed
   :rtype: pd.DataFrame


.. py:function:: find_catalog_in_image(catalog: pandas.DataFrame, wcs: astropy.wcs.WCS, image_shape: (int, int), mode: str = 'all') -> numpy.ndarray

   Convert the RA/DEC catalog into pixel coordinates using the provided WCS.

   :param catalog: a catalog dataframe
   :type catalog: pd.DataFrame
   :param wcs: the world coordinate system of a given image
   :type wcs: WCS
   :param image_shape: the shape of the image array associated with the WCS,
                       used to only consider stars with coordinates in image
   :type image_shape: (int, int)
   :param mode: either "all" or "wcs",
                see
                <https://docs.astropy.org/en/stable/api/astropy.coordinates.SkyCoord.html#astropy.coordinates.SkyCoord.to_pixel>
   :type mode: str

   :returns: pixel coordinates of stars in catalog that are present in the image
   :rtype: np.ndarray


